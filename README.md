# 關子嶺2026出遊費用計算系統

## 專案簡介

這是一個專為關子嶺2026年度員工旅遊設計的費用計算系統。系統能夠根據不同的參加者類型（同工、家眷、小孩）以及選擇的房型，自動計算出每個人的費用明細與總金額，並提供保證金管理功能。

## 專案結構

```
Guanziling2026/
├── index.html      # 主要 HTML 結構
├── main.js         # 費用計算邏輯
├── main.css        # 樣式表（包含完整 RWD 響應式設計）
└── README.md       # 專案說明文件
```

## 核心功能

### 1. 智慧型人員分類計算

#### 同工收費標準
- **基本費用**：保證金 1,000 元（活動結束後退還）
- **房型加價**：
  - 4人標準房：無加價
  - 2-3人標準房：+300 元
  - 2-3人湯屋房：+800 元
  - 4人湯屋房/親子房/和室：+300 元
  - 6人湯屋房：+300 元
- **總費用**：保證金 + 房型加價

#### 家眷收費標準
- **房型計費**：
  - 4人標準房：2,200 元
  - 2-3人標準房：2,500 元
  - 2-3人湯屋房：3,000 元
  - 4人湯屋房/親子房/和室：2,500 元
  - 6人湯屋房：2,500 元

#### 小孩收費標準
- **110cm-150cm**：1,500 元/人
- **110cm以下**：500 元/人

### 2. 房型選擇系統
提供 5 種房型選項，系統會根據選擇自動計算對應費用：
- 2-3人標準房
- 4人標準房
- 2-3人湯屋房
- 4人湯屋房、親子房、和室
- 6人湯屋房

### 3. 智慧驗證機制
- **同工人數檢查**：至少需要 1 位同工
- **房型人數限制（更新）**：
  - **少於 4 人**：只能選擇 2-3 人房型（標準房或湯屋房）
  - **4 人以上**：可選擇 4 人房、6 人房，但不可選 2-3 人房
  - 計算基準：同工 + 家眷 + 小孩總人數
- **即時錯誤提示**：清楚的警告訊息協助使用者正確輸入

### 4. 詳細費用明細
系統會為每位參加者生成獨立的費用明細表，包含：
- 房型加價金額
- 保證金（僅同工）
- 個人小計

### 5. 總計彙整區塊
獨立的總計區塊顯示：
- 各類人員數量統計
- 總金額計算
- 視覺化強調設計

### 6. 完整 RWD 響應式設計
- **桌面電腦 (>1024px)**：雙欄橫向佈局，最佳閱讀體驗
- **平板電腦 (769px-1024px)**：優化間距，保持雙欄設計
- **小平板/大手機 (481px-768px)**：單欄直向排列
- **手機 (≤480px)**：觸控優化，表格可橫向滑動
- **極小手機 (≤360px)**：極致壓縮，保持可用性

## 使用方式

### 基本操作流程

1. **輸入同工人數**：必填欄位，至少 1 位
2. **輸入家眷人數**：選填，可為 0
3. **輸入小孩人數**：
   - 110cm-150cm 的小孩人數
   - 110cm 以下的小孩人數
4. **選擇房型**：從下拉選單選擇合適的房型
5. **點擊計算按鈕**：系統會自動計算並顯示結果

### 驗證規則

1. **同工人數限制**：不可為 0，必須至少輸入 1 位同工
2. **房型人數限制（重要）**：
   - **1-3 人（含小孩）**：只能選擇「2-3人標準房」或「2-3人湯屋房」
   - **4 人以上（含小孩）**：只能選擇「4人標準房」、「4人湯屋房/親子房/和室」或「6人湯屋房」
   - 人數計算基準：同工 + 家眷 + 小孩（110-150cm）+ 小孩（110cm以下）
3. **即時錯誤提示**：若違反規則，系統會彈出清楚的警告訊息

### 費用明細說明

- **同工**：顯示房型加價 + 保證金 1,000 元
- **家眷**：顯示房價（無保證金）
- **小孩**：直接顯示固定費用

## 技術架構

### HTML (index.html)
- **語義化結構**：使用有意義的標籤建構表單
- **雙區塊佈局**：
  - 左側：表單輸入區 (form-section)
  - 右側：明細與總計區 (right-section)
    - 費用明細列表 (detail-section)
    - 總計統計 (summary-section)
- **無障礙設計**：完整的 label 標籤支援

### JavaScript (main.js)
- **主要函式**：`calc()` - 執行所有計算與驗證邏輯
- **費用計算公式**：
  ```javascript
  同工總費用 = 人數 × (保證金 1000 + 房型加價)
  家眷總費用 = 人數 × 房價
  小孩(110-150)總費用 = 人數 × 1500
  小孩(<110)總費用 = 人數 × 500
  總金額 = 同工總費用 + 家眷總費用 + 小孩總費用
  ```
- **動態表格生成**：
  - `addDetailRow()` 函式：生成個人明細表格
  - 動態插入總計彙整表格
- **驗證機制**：
  - 同工人數不可為 0
  - 房型與總人數（含小孩）匹配檢查
    - 1-3 人：限 2-3 人房型
    - 4+ 人：限 4 人房或 6 人房型

### CSS (main.css)
- **Flexbox 響應式佈局**：
  - 桌面：雙欄橫向排列
  - 手機/平板：單欄直向排列
- **卡片式設計**：使用陰影、圓角、漸層效果
- **RWD 斷點策略**：
  - 1024px：平板橫向
  - 768px：平板直向/小平板
  - 480px：手機
  - 360px：極小手機
- **互動效果**：
  - 按鈕 hover 與 active 狀態
  - 輸入框 focus 藍色邊框
  - 表格 hover 高亮
- **自訂捲軸**：美化的捲軸樣式
- **總計強調樣式**：
  - 漸層色標題
  - 金額底色高亮

## 計算邏輯詳解

### 同工費用
```
基礎：保證金 1,000 元（活動後退還）
加價：依房型 0~800 元
範例：選擇「2-3人湯屋房」
     = 1,000（保證金）+ 800（房型加價）= 1,800 元
```

### 家眷費用
```
依房型收費：2,200~3,000 元
範例：選擇「4人標準房」
     = 2,200 元
```

### 小孩費用
```
110cm-150cm：固定 1,500 元
110cm以下：固定 500 元
```

## 介面設計

### 配色方案
- **主色調**：#007bff（專業藍）
- **背景色**：#f5f5f5（淺灰）
- **卡片背景**：#ffffff（純白）
- **明細區背景**：#fafafa（極淺灰）
- **總計漸層**：#007bff → #0098ff（藍色漸層）
- **總計金額底色**：#eef7ff（淡藍）

### 字體設計
- **字型**：Microsoft JhengHei（微軟正黑體）、PingFang TC（蘋方-繁）
- **標題**：24px（桌面）/ 18px（手機）
- **內文**：15px
- **按鈕**：17px
- **明細表格**：14px（桌面）/ 12px（手機）

### 視覺層次
- **陰影效果**：卡片使用柔和陰影營造浮起感
- **邊框設計**：淡色邊框區隔區塊
- **圓角處理**：12px 圓角柔化視覺
- **間距規劃**：統一使用 16-32px 的間距系統

### 互動回饋
- **按鈕 Hover**：背景色加深
- **按鈕 Active**：輕微縮放效果
- **輸入框 Focus**：藍色邊框 + 外框陰影
- **表格 Hover**：行背景色變化

## 響應式設計細節

### 桌面電腦 (> 1024px)
- 雙欄橫向佈局，最大寬度 1400px
- 明細區最大高度 600px，超出可捲動
- 總計區域獨立顯示，視覺醒目

### 平板電腦 (769px - 1024px)
- 維持雙欄設計，縮小間距
- 明細區高度調整為 600px
- 字體微調為 20px

### 小平板/大手機 (481px - 768px)
- 切換為單欄直向排列
- 明細區高度限制 500px
- 輸入框增大觸控面積

### 手機 (≤ 480px)
- 完全單欄佈局
- 明細區高度 400px
- 表格橫向可滑動
- 輸入框字體 16px（防止 iOS 自動縮放）
- 按鈕增大至 14px padding

### 極小手機 (≤ 360px)
- 極致壓縮版面
- 減少 padding 至最小
- 字體縮小至 13-16px
- 保持核心功能可用

## 特色功能

### 1. 保證金管理
- 同工費用包含 1,000 元保證金
- 明細表格清楚標示保證金欄位
- 小計自動計入保證金

### 2. 動態表格生成
- 根據輸入人數自動生成對應數量的明細列
- 每個人獨立顯示費用拆解
- 總計表格動態彙整統計

### 3. 視覺化總計
- 獨立的總計區塊
- 漸層色標題吸引注意
- 清楚顯示各類人數與總金額

### 4. 房型智慧限制
- 自動檢查總人數（同工+家眷+小孩）與房型匹配
- **1-3 人**：只能選擇 2-3 人房型
- **4+ 人**：只能選擇 4 人房或 6 人房型
- 即時警告提示，避免選擇不適合的房型

## 瀏覽器相容性

- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+
- ✅ iOS Safari 14+
- ✅ Android Chrome 90+

使用標準 HTML5/CSS3/ES6 語法，無需額外 polyfill。

## 部署方式

### 快速部署
此專案為純前端靜態網頁，可直接部署至：

1. **GitHub Pages**
   ```bash
   git push origin main
   # 在 GitHub 專案設定中啟用 Pages
   ```

2. **Netlify**
   - 拖放專案資料夾至 Netlify
   - 或連接 GitHub 自動部署

3. **Vercel**
   ```bash
   vercel deploy
   ```

4. **本地測試**
   - 直接開啟 `index.html`
   - 或使用 Live Server 擴充功能

### 無需建置步驟
- 無需 npm install
- 無需 webpack/vite 打包
- 無需編譯或轉譯

## 開發指南

### 檔案結構說明
```
index.html    → 主要結構與輸入表單
main.js       → 計算邏輯、驗證規則、動態表格生成
main.css      → 完整樣式與 RWD 設計
README.md     → 專案文件
```

### 修改費用標準
若需調整費用，修改 `main.js` 中的對應變數：
```javascript
const depositEmployee = 1000;        // 同工保證金
const feeChild110to150Basic = 1500;  // 110-150cm小孩
const feeChildUnder110Basic = 500;   // 110cm以下小孩
```

### 修改房型選項
1. 編輯 `index.html` 的 `<select>` 選項
2. 同步更新 `main.js` 的 `switch` 語句

### 調整 RWD 斷點
修改 `main.css` 中的 `@media` 查詢斷點值。

## 未來改進方向

### 短期規劃
1. ✅ 保證金功能（已實作）
2. ✅ 房型人數限制（已實作）
3. ⬜ 匯出 PDF 功能
4. ⬜ 列印最佳化樣式

### 中期規劃
1. ⬜ LocalStorage 儲存歷史記錄
2. ⬜ 多組團體同時計算
3. ⬜ Excel 匯出功能
4. ⬜ 費用統計圖表

### 長期規劃
1. ⬜ 後端整合（資料庫儲存）
2. ⬜ 線上支付整合
3. ⬜ 多語言支援
4. ⬜ 管理後台

## 已知限制

1. 純前端計算，無後端儲存
2. 重新整理後資料會清空
3. 無法多人協作編輯
4. 無歷史記錄查詢功能

## 常見問題 FAQ

**Q: 保證金會退還嗎？**
A: 是的，同工的 1,000 元保證金會在活動結束後退還。

**Q: 可以選擇不同房型嗎？**
A: 目前系統採用單一房型選擇，所有人員適用同一房型標準。

**Q: 小孩年齡如何界定？**
A: 依身高區分：110-150cm 收費 1,500 元，110cm 以下收費 500 元。

**Q: 家眷需要繳保證金嗎？**
A: 不需要，保證金僅適用於同工。

**Q: 房型人數限制的原因？**
A: 確保房型容納人數合理。1-3人選擇2-3人房，4人以上選擇4人房或6人房，避免人數與房型不匹配的情況。總人數包含所有參加者（同工+家眷+小孩）。

## 版本歷程

### v2.0 (2025-11-24) - 當前版本
- ✨ 新增保證金管理功能（同工 1,000 元）
- ✨ 更新房型選項與費用標準
- ✨ 實作房型人數限制驗證（更新）
  - 1-3 人限制選擇 2-3 人房型
  - 4+ 人限制選擇 4 人房或 6 人房型
  - 人數計算包含所有參加者（同工+家眷+小孩）
- ✨ 優化總計區塊為獨立 section
- 🎨 重新設計明細表格結構（簡化為 3 欄）
- 🎨 改善 RWD 響應式佈局（5 個斷點）
- 🐛 修正小孩費用計算邏輯
- 🐛 修正房型驗證邏輯，納入小孩人數
- 📝 完整重寫 README 文件

### v1.0 (初始版本)
- 基礎費用計算功能
- 簡單的表單輸入介面
- 基本的 RWD 設計

## 技術規格

### 前端技術
- **HTML5**：語義化標籤、表單驗證
- **CSS3**：Flexbox、媒體查詢、漸層、陰影
- **JavaScript (ES6)**：箭頭函式、模板字串、const/let

### 效能優化
- 無外部依賴，載入速度快
- CSS 選擇器優化
- 最小化 DOM 操作
- 使用 CSS 硬體加速（transform）

### 程式碼品質
- 清晰的變數命名
- 模組化函式設計
- 詳細的註解說明
- 一致的程式碼風格

## 授權與使用

此專案為內部使用工具，專為關子嶺2026員工旅遊設計。

### 使用限制
- 僅限內部使用
- 不得商業化
- 不得重新分發

### 貢獻指南
若需修改或新增功能，請：
1. Fork 本專案
2. 建立功能分支
3. 提交 Pull Request
4. 等待審核

## 技術支援

### 聯絡方式
如有問題、建議或錯誤回報，請聯繫專案維護者。

### 緊急問題處理
1. 檢查瀏覽器主控台錯誤訊息
2. 確認輸入資料格式正確
3. 嘗試重新整理頁面
4. 清除瀏覽器快取

### 相容性問題
若遇到顯示問題：
1. 更新瀏覽器至最新版本
2. 停用瀏覽器擴充功能測試
3. 嘗試使用無痕模式
4. 檢查螢幕縮放比例

## 致謝

感謝所有使用本系統的同仁，您的回饋讓系統持續進步。

---

**專案名稱**：關子嶺2026出遊費用計算系統  
**專案代號**：Guanziling2026  
**最後更新**：2025年11月24日  
**當前版本**：v2.0  
**維護狀態**：✅ 活躍維護中

---

**📌 快速連結**
- [GitHub Repository](https://github.com/gordonpon/Guanziling2026)
- 線上展示：待部署
- 問題回報：GitHub Issues

**🎯 核心特色**
✅ 零依賴純前端  
✅ 完整 RWD 響應式  
✅ 智慧型驗證機制  
✅ 保證金管理功能  
✅ 即時費用計算  
✅ 美觀的使用者介面
